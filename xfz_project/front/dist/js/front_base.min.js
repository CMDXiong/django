function FrontBase(){}function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper")}FrontBase.prototype.run=function(){this.listenAuthBoxHover()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),o=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),o.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSigninEvent=function(){var i=this,t=$(".signin-group"),o=t.find("input[name='telephone']"),r=t.find("input[name='password']"),s=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=o.val(),n=r.val(),e=s.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){if(200===t.code)i.hideEvent(),window.location.reload();else{var n=t.message;if("string"==typeof n||n.constructor===String)window.messageBox.show(n);else for(var e in n){var o=n[e][0];window.messageBox.show(o)}}},fail:function(t){console.log(t)}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),o=((new Date).getTime()-e)/1e3;return o<60?"刚刚":60<=o&&o<3600?(minutes=parseInt(o/60),minutes+"分钟前"):3600<=o&&o<86400?(hours=parseInt(o/60/60),hours+"小时前"):86400<=o&&o<2592e3?(days=parseInt(o/60/60/24),days+"天前"):n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwibGlzdGVuQXV0aEJveEhvdmVyIiwiYXV0aEJveCIsInVzZXJNb3JlQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsInNlbGYiLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJsaXN0ZW5TaWduaW5FdmVudCIsImxpc3RlbkltZ0NhcHRjaGFFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNpZ25pbkJ0biIsInNpZ251cEJ0biIsImNsb3NlQnRuIiwiY2xpY2siLCJjc3MiLCJsZWZ0IiwiY3VycmVudExlZnQiLCJwYXJzZUludCIsImFuaW1hdGUiLCJpbWdDYXB0Y2hhIiwiYXR0ciIsIk1hdGgiLCJyYW5kb20iLCJzaWduaW5Hcm91cCIsInRlbGVwaG9uZUlucHV0IiwiZmluZCIsInBhc3N3b3JkSW5wdXQiLCJyZW1lbWJlcklucHV0IiwidGVsZXBob25lIiwidmFsIiwicGFzc3dvcmQiLCJyZW1lbWJlciIsInByb3AiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJtZXNzYWdlT2JqZWN0IiwiY29uc3RydWN0b3IiLCJTdHJpbmciLCJtZXNzYWdlQm94Iiwia2V5IiwibWVzc2FnZSIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJ0ZW1wbGF0ZSIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVTaW5jZSIsImRhdGFWYWx1ZSIsImRhdGUiLCJEYXRlIiwiZGF0YXRzIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsIm1pbnV0ZXMiLCJob3VycyIsImRheXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91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VUFDQUQsR0FBUSxJQUNqQyxPQUFHRSxFQUFZLEdBQ0osS0FDVyxJQUFaQSxHQUFrQkEsRUFBWSxNQUNwQ0MsUUFBVTdDLFNBQVM0QyxFQUFVLElBQ3RCQyxRQUFRLE9BQ0csTUFBWkQsR0FBcUJBLEVBQVksT0FDdkNFLE1BQVE5QyxTQUFTNEMsRUFBVSxHQUFHLElBQ3ZCRSxNQUFNLE9BQ0ssT0FBWkYsR0FBd0JBLEVBQVksUUFDMUNHLEtBQU8vQyxTQUFTNEMsRUFBVSxHQUFHLEdBQUcsSUFDekJHLEtBQUssTUFFRFAsRUFBS1EsY0FLSixJQUpBUixFQUFLUyxXQUlLLElBSFpULEVBQUtVLFNBR2UsSUFGbkJWLEVBQUtXLFdBRXVCLElBRDFCWCxFQUFLWSIsImZpbGUiOiJmcm9udF9iYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOeUqOadpeWkhOeQhuWvvOiIquadoVxuZnVuY3Rpb24gRnJvbnRCYXNlKCkge1xuXG59XG5cbkZyb250QmFzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5BdXRoQm94SG92ZXIoKTtcbn07XG5cbkZyb250QmFzZS5wcm90b3R5cGUubGlzdGVuQXV0aEJveEhvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhdXRoQm94ID0gJChcIi5hdXRoLWJveFwiKTtcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKFwiLnVzZXItbW9yZS1ib3hcIik7XG4gICAgYXV0aEJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVzZXJNb3JlQm94LnNob3coKTtcbiAgICB9LGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xuICAgIH0pXG59O1xuXG4vL1xuLy8gJChmdW5jdGlvbiAoKSB7XG4vLyAgICAkKCcjYnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICQoXCIubWFzay13cmFwcGVyXCIpLnNob3coKTtcbi8vICAgIH0pO1xuLy9cbi8vICAgICQoXCIuY2xvc2UtYnRuXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAkKFwiLm1hc2std3JhcHBlclwiKS5oaWRlKCk7XG4vL1xuLy8gICAgfSk7XG4vLyB9KTtcbi8vXG4vL1xuLy8gJChmdW5jdGlvbiAoKSB7XG4vLyAgICAkKFwiLnN3aXRjaFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgdmFyIHNyY29sbFdyYXBwZXIgPSAkKFwiLnNjcm9sbC13cmFwcGVyXCIpO1xuLy8gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNyY29sbFdyYXBwZXIuY3NzKCdsZWZ0Jyk7XG4vLyAgICAgICAgY3VycmVudExlZnQgPSBwYXJzZUludChjdXJyZW50TGVmdCk7XG4vLyAgICAgICAgaWYgKGN1cnJlbnRMZWZ0PDApe1xuLy8gICAgICAgICAgIHNyY29sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6ICcwJ30pO1xuLy8gICAgICAgIH1lbHNle1xuLy8gICAgICAgICAgICBzcmNvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiAnLTQwMHB4J30pO1xuLy9cbi8vICAgICAgICB9XG4vLyAgICB9KTtcbi8vIH0pO1xuXG4vLyDnlKjmnaXlpITnkIbnmbvlvZXlkozms6jlhoznmoRcbmZ1bmN0aW9uIEF1dGgoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XG4gICAgc2VsZi5zY3JvbGxXcmFwcGVyID0gJChcIi5zY3JvbGwtd3JhcHBlclwiKTtcblxufVxuXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubGlzdGVuU2hvd0hpZGVFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuU3dpdGNoRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblNpZ25pbkV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5JbWdDYXB0Y2hhRXZlbnQoKTtcbn07XG5cbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xufTtcblxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoXCIuc2lnbmluLWJ0blwiKTtcbiAgICB2YXIgc2lnbnVwQnRuID0gJChcIi5zaWdudXAtYnRuXCIpO1xuICAgIHZhciBjbG9zZUJ0biA9ICQoXCIuY2xvc2UtYnRuXCIpO1xuICAgIHNpZ25pbkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOjB9KTtcbiAgICB9KTtcbiAgICBzaWdudXBCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHtcImxlZnRcIjotNDAwfSk7XG4gICAgfSk7XG5cbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XG4gICAgfSk7XG5cbn07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHN3aXRjaGVyID0gJChcIi5zd2l0Y2hcIik7XG5cbiAgICBzd2l0Y2hlci5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoJ2xlZnQnKTtcbiAgICAgICAgY3VycmVudExlZnQgPSBwYXJzZUludChjdXJyZW50TGVmdCk7XG4gICAgICAgIGlmIChjdXJyZW50TGVmdDwwKXtcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjogJzAnfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiAnLTQwMHB4J30pO1xuICAgICAgIH1cbiAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuSW1nQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKCcuaW1nLWNhcHRjaGEnKTtcbiAgICBpbWdDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW1nQ2FwdGNoYS5hdHRyKFwic3JjXCIsIFwiL2FjY291bnQvaW1nX2NhcHRjaGEvXCIrXCI/cmFuZG9tPVwiK01hdGgucmFuZG9tKCkpO1xuICAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbmluRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc2lnbmluR3JvdXAgPSAkKFwiLnNpZ25pbi1ncm91cFwiKTtcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xuICAgICAgICB2YXIgcmVtZW1iZXIgPSByZW1lbWJlcklucHV0LnByb3AoXCJjaGVja2VkXCIpO1xuXG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L2xvZ2luLycsXG4gICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOiByZW1lbWJlcj8xOjBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IHJlc3VsdFsnbWVzc2FnZSddO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2VPYmplY3QgPT09ICdzdHJpbmcnIHx8IG1lc3NhZ2VPYmplY3QuY29uc3RydWN0b3IgPT09IFN0cmluZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2VPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBtZXNzYWdlT2JqZWN0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBtZXNzYWdlT2JqZWN0W2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGF1dGggID0gbmV3IEF1dGgoKTtcbiAgICBhdXRoLnJ1bigpO1xufSk7XG5cblxuJChmdW5jdGlvbiAoKSB7XG4gICB2YXIgZnJvbnRCYXNlID0gbmV3IEZyb250QmFzZSgpO1xuICAgZnJvbnRCYXNlLnJ1bigpO1xufSk7XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgaWYodGVtcGxhdGUpe1xuICAgICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGFWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRhVmFsdWUpO1xuICAgICAgICAgICAgdmFyIGRhdGF0cyA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMgLSBkYXRhdHMpLzEwMDA7XG4gICAgICAgICAgICBpZih0aW1lc3RhbXAgPCA2MCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuICfliJrliJonO1xuICAgICAgICAgICAgfWVsc2UgaWYgKHRpbWVzdGFtcCA+PTYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKXtcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwKVxuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzKyfliIbpkp/liY0nO1xuICAgICAgICAgICAgfWVsc2UgaWYgKHRpbWVzdGFtcCA+PTYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KXtcbiAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MC82MClcbiAgICAgICAgICAgICAgICByZXR1cm4gaG91cnMrJ+Wwj+aXtuWJjSc7XG4gICAgICAgICAgICB9ZWxzZSBpZiAodGltZXN0YW1wID49NjAqNjAqMjQgJiYgdGltZXN0YW1wIDwgNjAqNjAqMjQqMzApe1xuICAgICAgICAgICAgICAgIGRheXMgPSBwYXJzZUludCh0aW1lc3RhbXAvNjAvNjAvMjQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRheXMrJ+WkqeWJjSc7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB5ZWFyKycvJyttb250aCsnLycrZGF5KycgJytob3VyKyc6JyttaW51dGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICB9O1xuICAgfVxufSk7Il19
