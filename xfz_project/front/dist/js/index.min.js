function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUI=$("#banner-ul"),this.liList=this.bannerUI.children("li"),this.bannercount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannercount-1).clone();n.bannerUI.prepend(e),n.bannerUI.append(t),n.bannerUI.css({width:(n.bannercount+2)*n.bannerWidth,left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannercount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannercount+16+16*(n.bannercount-1)})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggerArrow(!0)},function(){n.loop(),n.toggerArrow(!1)})},Banner.prototype.toggerArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUI.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.bannercount-1:t===n.bannercount+1?0:n.index-1,n.pageControl.children().eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;$("#banner-ul");this.timer=setInterval(function(){n.index>=n.bannercount+1?(n.bannerUI.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUI.css({left:-n.bannerWidth*n.bannercount}),n.index=n.bannercount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannercount+1?(n.bannerUI.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){console.log("running..."),this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var r=this;loadBtn=$("#load-more"),loadBtn.click(function(){var n=r.page;xfzajax.get({url:"/news/list/",data:{p:n,category_id:r.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),r.page+=1}else loadBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var i=$(this),a=i.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),r=$(".list-inner-group");r.empty(),r.append(e),o.page=2,o.category_id=a,i.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVJIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJjb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwicHJlcGVuZCIsImFwcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwidGltZXIiLCJ0b2dnZXJBcnJvdyIsImxvb3AiLCJpc1Nob3ciLCJzaG93IiwiaGlkZSIsImFuaW1hdGUiLCJzdG9wIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInNldEludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwiY29uc29sZSIsImxvZyIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwidGVtcGxhdGUiLCJsaXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50IiwibGkiLCJhdHRyIiwibmV3c0xpc3RHcm91cCIsImVtcHR5Il0sIm1hcHBpbmdzIjoiQUFFQSxTQUFTQSxTQUNMQyxLQUFLQyxZQUFjLElBQ25CRCxLQUFLRSxZQUFjQyxFQUFFLGlCQUNyQkgsS0FBS0ksTUFBUSxFQUNiSixLQUFLSyxVQUFZRixFQUFFLGVBQ25CSCxL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QyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdEIsSUFBSUMsRUFBU0QsRUFBYSxLQUN0QkUsRUFBTUMsU0FBUyxZQUFhLENBQUNGLE9BQVVBLElBQ3ZDTSxFQUFnQmxFLEVBQUUscUJBQ3RCa0UsRUFBY0MsUUFDZEQsRUFBYzVDLE9BQU91QyxHQUNyQmxELEVBQUtDLEtBQU8sRUFDWkQsRUFBS0UsWUFBY0EsRUFDbkJtRCxFQUFHbkMsU0FBUyxVQUFVWSxXQUFXQyxZQUFZLFVBQzdDL0IsRUFBS0csUUFBUXVCLGNBT2pDM0IsTUFBTUssVUFBVWtDLElBQU0sV0FDUHBELEtBQ051RCxzQkFETXZELEtBRU5rRSw2QkFLVC9ELEVBQUUsWUFDYyxJQUFJSixRQUNWcUQsT0FFSyxJQUFJdkMsT0FDVnVDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG5mdW5jdGlvbiBCYW5uZXIoKSB7XG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcbiAgICB0aGlzLmJhbm5lckdyb3VwID0gJChcIiNiYW5uZXItZ3JvdXBcIik7XG4gICAgdGhpcy5pbmRleCA9IDE7XG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XG4gICAgdGhpcy5yaWdodEFycm93ID0gJChcIi5yaWdodC1hcnJvd1wiKTtcbiAgICB0aGlzLmJhbm5lclVJID0gJChcIiNiYW5uZXItdWxcIik7XG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVJLmNoaWxkcmVuKCdsaScpO1xuICAgIHRoaXMuYmFubmVyY291bnQgPSB0aGlzLmxpTGlzdC5sZW5ndGg7XG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xufVxuXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xuICAgIHZhciBsYXN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoc2VsZi5iYW5uZXJjb3VudC0xKS5jbG9uZSgpO1xuICAgIHNlbGYuYmFubmVyVUkucHJlcGVuZChsYXN0QmFubmVyKTtcbiAgICBzZWxmLmJhbm5lclVJLmFwcGVuZChmaXJzdEJhbm5lcik7XG4gICAgc2VsZi5iYW5uZXJVSS5jc3Moeyd3aWR0aCc6KHNlbGYuYmFubmVyY291bnQrMikqc2VsZi5iYW5uZXJXaWR0aCwgJ2xlZnQnOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmb3IodmFyIGk9MDsgaTxzZWxmLmJhbm5lcmNvdW50OyBpKyspIHtcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XG4gICAgICAgIGlmKGkgPT09IDApe1xuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHNlbGYucGFnZUNvbnRyb2wuY3NzKHsnd2lkdGgnOiBzZWxmLmJhbm5lcmNvdW50KigxNisxMCl9KVxuICAgIHNlbGYucGFnZUNvbnRyb2wuY3NzKHsnd2lkdGgnOiBzZWxmLmJhbm5lcmNvdW50KjEyKzgqMisxNiooc2VsZi5iYW5uZXJjb3VudC0xKX0pXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgLy8g56ys5LiA5Liq5Ye95pWw5piv5oqK6byg5qCH56e75Yqo5YiwYmFubmVy5LiK5Lya5omn6KGM55qE5Ye95pWwXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XG4gICAgICAgIHNlbGYudG9nZ2VyQXJyb3codHJ1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgIC8vIOesrOS6jOS4quWHveaVsOaYr+aKium8oOagh+S7jmJhbm5lcuS4iuenu+i1sOS8muaJp+ihjOeahOWHveaVsFxuICAgICAgICBzZWxmLmxvb3AoKTtcbiAgICAgICAgc2VsZi50b2dnZXJBcnJvdyhmYWxzZSk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dlckFycm93ID0gZnVuY3Rpb24oaXNTaG93KXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYoaXNTaG93KXtcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuc2hvdygpO1xuICAgIH1lbHNle1xuICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKCk7XG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5oaWRlKCk7XG4gICAgfVxuXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmJhbm5lclVJLnN0b3AoKS5hbmltYXRlKHtcImxlZnRcIjotNzk4KnNlbGYuaW5kZXh9LCA1MDApO1xuICAgIHZhciBpbmRleCA9IHNlbGYuaW5kZXg7XG4gICAgaWYoaW5kZXggPT09IDApe1xuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyY291bnQtMTtcbiAgICB9ZWxzZSBpZiAoaW5kZXggPT09IHNlbGYuYmFubmVyY291bnQrMSl7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICB9ZWxzZXtcbiAgICAgICAgaW5kZXggPSBzZWxmLmluZGV4IC0gMTtcbiAgICB9XG5cbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCkuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxufTtcblxuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGJhbm5lclVJID0gJChcIiNiYW5uZXItdWxcIik7XG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lcmNvdW50KzEpe1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVSS5jc3MoeydsZWZ0JzogLXNlbGYuYmFubmVyV2lkdGh9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSwgMjAwMCk7XG5cbiAgICAvLyBjbGVhckludGVydmFsKHRpbWVyKTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApe1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVSS5jc3MoeydsZWZ0Jzotc2VsZi5iYW5uZXJXaWR0aCpzZWxmLmJhbm5lcmNvdW50fSk7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJjb3VudC0xO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0pO1xuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lcmNvdW50KzEgKXtcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVUkuY3NzKHsnbGVmdCc6LXNlbGYuYmFubmVyV2lkdGh9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oJ2xpJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIG9iaikge1xuICAgICAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4KzE7ICAvLyDkuI7mupDku6PnoIHkuI3kuIDoh7RcbiAgICAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuXG4gICAgICAgIH0pO1xuICAgIH0pXG59O1xuXG5cblxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBjb25zb2xlLmxvZygncnVubmluZy4uLicpO1xuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XG5cbiAgICB0aGlzLmxvb3AoKTtcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xuXG59O1xuXG5mdW5jdGlvbiBJbmRleCgpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2UgPSAyO1xuICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSAwO1xuICAgIHNlbGYubG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlXCIpO1xuXG5cbn1cblxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBsb2FkQnRuID0gJChcIiNsb2FkLW1vcmVcIik7XG4gICAgbG9hZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYWdlID0gc2VsZi5wYWdlO1xuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICdwJzogcGFnZSxcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBzZWxmLmNhdGVnb3J5X2lkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYobmV3c2VzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIsIHtcIm5ld3Nlc1wiOiBuZXdzZXN9KVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0xO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB0YWJHcm91cCA9ICQoJy5saXN0LXRhYicpO1xuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyB0aGlzIDrku6PooajlvZPliY3pgInkuK3nmoTov5nkuKpsaeagh+etvlxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKCdkYXRhLWNhdGVnb3J5Jyk7XG4gICAgICAgIHZhciBwYWdlID0gMTtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdGVnb3J5X2lkID0gY2F0ZWdvcnlfaWQ7XG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkQnRuLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcblxufTtcblxuLy8g5L+d6K+B5ZyoaHRtbOWKoOi9veWujOaIkOWQju+8jOWGjeaJp+ihjOaLrOWPt+WGheeahOWHveaVsFxuJChmdW5jdGlvbiAoKSB7XG4gICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xuICAgYmFubmVyLnJ1bigpO1xuXG4gICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcbiAgIGluZGV4LnJ1bigpO1xufSk7Il19
