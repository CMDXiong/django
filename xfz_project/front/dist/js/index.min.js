function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUI=$("#banner-ul"),this.liList=this.bannerUI.children("li"),this.bannercount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more"),template.defaults.imports.timeSince=function(n){var e=new Date(n),t=e.getTime(),r=((new Date).getTime()-t)/1e3;return r<60?"刚刚":60<=r&&r<3600?(minutes=parseInt(r/60),minutes+"分钟前"):3600<=r&&r<86400?(hours=parseInt(r/60/60),hours+"小时前"):86400<=r&&r<2592e3?(days=parseInt(r/60/60/24),days+"天前"):e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()}}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannercount-1).clone();n.bannerUI.prepend(t),n.bannerUI.append(e),n.bannerUI.css({width:(n.bannercount+2)*n.bannerWidth,left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannercount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannercount+16+16*(n.bannercount-1)})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggerArrow(!0)},function(){n.loop(),n.toggerArrow(!1)})},Banner.prototype.toggerArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUI.stop().animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannercount-1:e===n.bannercount+1?0:n.index-1,n.pageControl.children().eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;$("#banner-ul");this.timer=setInterval(function(){n.index>=n.bannercount+1?(n.bannerUI.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUI.css({left:-n.bannerWidth*n.bannercount}),n.index=n.bannercount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannercount+1?(n.bannerUI.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n+1,t.animate()})})},Banner.prototype.run=function(){console.log("running..."),this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var r=this;loadBtn=$("#load-more"),loadBtn.click(function(){var n=r.page;xfzajax.get({url:"/news/list/",data:{p:n,category_id:r.category_id},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),r.page+=1}else loadBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var i=$(this),a=i.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var e=n.data,t=template("news-item",{newses:e}),r=$(".list-inner-group");r.empty(),r.append(t),o.page=2,o.category_id=a,i.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVJIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJjb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGF0YVZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRhdHMiLCJnZXRUaW1lIiwidGltZXN0YW1wIiwibWludXRlcyIsInBhcnNlSW50IiwiaG91cnMiLCJkYXlzIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwicHJlcGVuZCIsImFwcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwidGltZXIiLCJ0b2dnZXJBcnJvdyIsImxvb3AiLCJpc1Nob3ciLCJzaG93IiwiaGlkZSIsImFuaW1hdGUiLCJzdG9wIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInNldEludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwiY29uc29sZSIsImxvZyIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImxpIiwiYXR0ciIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSJdLCJtYXBwaW5ncyI6IkFBRUEsU0FBU0EsU0FDTEMsS0FBS0MsWUFBYyxJQUNuQkQsS0FBS0UsWUFBY0MsRUFBRSxpQkFDckJILEtBQUtJLE1BQVEsRUFDYkosS0FBS0ssVUFBWUYsRUFBRSxlQUNuQkgsS0FBS00sV0FBYUgsRUFBRSxnQkFDcEJILEtBQUtPLFNBQVdKLEVBQUUsY0FDbEJILEtBQUtRLE9BQVNSLEtBQUtPLFNBQVNFLFNBQVMsTUFDckNULEtBQUtVLFlBQWNWLEtBQUtRLE9BQU9HLE9BQy9CWCxLQUFLWSxZQUFjVCxFQUFFLGlCQXFJekIsU0FBU1UsUUFDTCxJQUFJQyxFQUFPZCxLQUNYYyxFQUFLQyxLQUFPLEVBQ1pELEVBQUtFLFlBQWMsRUFDbkJGLEVBQUtHLFFBQVVkLEVBQUUsY0FDakJlLFNBQVNDLFNBQVNDLFFBQVFDLFVBQVksU0FBVUMsR0FDNUMsSUFBSUMsRUFBTyxJQUFJQyxLQUFLRixHQUNoQkcsRUFBU0YsRUFBS0csVUFFZEMsSUFEUSxJQUFLSCxNQUFRRSxVQUNBRCxHQUFRLElBQ2pDLE9BQUdFLEVBQVksR0FDSixLQUNXLElBQVpBLEdBQWtCQSxFQUFZLE1BQ3BDQyxRQUFVQyxTQUFTRixFQUFVLElBQ3RCQyxRQUFRLE9BQ0csTUFBWkQsR0FBcUJBLEVBQVksT0FDdkNHLE1BQVFELFNBQVNGLEVBQVUsR0FBRyxJQUN2QkcsTUFBTSxPQUNLLE9BQVpILEdBQXdCQSxFQUFZLFFBQzFDSSxLQUFPRixTQUFTRixFQUFVLEdBQUcsR0FBRyxJQUN6QkksS0FBSyxNQUVEUixFQUFLUyxjQUtKLElBSkFULEVBQUtVLFdBSUssSUFIWlYsRUFBS1csU0FHZSxJQUZuQlgsRUFBS1ksV0FFdUIsSUFEMUJaLEVBQUthLGNBNUo5QnJDLE9BQU9zQyxVQUFVQyxXQUFhLFdBQzFCLElBQUl4QixFQUFPZCxLQUNQdUMsRUFBY3pCLEVBQUtOLE9BQU9nQyxHQUFHLEdB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SUFBTSxXQUNQdkUsS0FDTjBFLHNCQURNMUUsS0FFTm9GLDZCQUtUakYsRUFBRSxZQUNjLElBQUlKLFFBQ1Z3RSxPQUVLLElBQUkxRCxPQUNWMEQiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5cbmZ1bmN0aW9uIEJhbm5lcigpIHtcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk4O1xuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcbiAgICB0aGlzLmluZGV4ID0gMTtcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoXCIubGVmdC1hcnJvd1wiKTtcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xuICAgIHRoaXMuYmFubmVyVUkgPSAkKFwiI2Jhbm5lci11bFwiKTtcbiAgICB0aGlzLmxpTGlzdCA9IHRoaXMuYmFubmVyVUkuY2hpbGRyZW4oJ2xpJyk7XG4gICAgdGhpcy5iYW5uZXJjb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcbiAgICB0aGlzLnBhZ2VDb250cm9sID0gJChcIi5wYWdlLWNvbnRyb2xcIik7XG59XG5cbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lcmNvdW50LTEpLmNsb25lKCk7XG4gICAgc2VsZi5iYW5uZXJVSS5wcmVwZW5kKGxhc3RCYW5uZXIpO1xuICAgIHNlbGYuYmFubmVyVUkuYXBwZW5kKGZpcnN0QmFubmVyKTtcbiAgICBzZWxmLmJhbm5lclVJLmNzcyh7J3dpZHRoJzooc2VsZi5iYW5uZXJjb3VudCsyKSpzZWxmLmJhbm5lcldpZHRoLCAnbGVmdCc6IC1zZWxmLmJhbm5lcldpZHRofSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZvcih2YXIgaT0wOyBpPHNlbGYuYmFubmVyY291bnQ7IGkrKykge1xuICAgICAgICB2YXIgY2lyY2xlID0gJChcIjxsaT48L2xpPlwiKTtcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcbiAgICAgICAgaWYoaSA9PT0gMCl7XG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gc2VsZi5wYWdlQ29udHJvbC5jc3Moeyd3aWR0aCc6IHNlbGYuYmFubmVyY291bnQqKDE2KzEwKX0pXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moeyd3aWR0aCc6IHNlbGYuYmFubmVyY291bnQqMTIrOCoyKzE2KihzZWxmLmJhbm5lcmNvdW50LTEpfSlcbn07XG5cbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAvLyDnrKzkuIDkuKrlh73mlbDmmK/miorpvKDmoIfnp7vliqjliLBiYW5uZXLkuIrkvJrmiafooYznmoTlh73mlbBcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcbiAgICAgICAgc2VsZi50b2dnZXJBcnJvdyh0cnVlKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgLy8g56ys5LqM5Liq5Ye95pWw5piv5oqK6byg5qCH5LuOYmFubmVy5LiK56e76LWw5Lya5omn6KGM55qE5Ye95pWwXG4gICAgICAgIHNlbGYubG9vcCgpO1xuICAgICAgICBzZWxmLnRvZ2dlckFycm93KGZhbHNlKTtcbiAgICB9KTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUudG9nZ2VyQXJyb3cgPSBmdW5jdGlvbihpc1Nob3cpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBpZihpc1Nob3cpe1xuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XG4gICAgfWVsc2V7XG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcbiAgICB9XG5cbn07XG5cbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuYmFubmVyVUkuc3RvcCgpLmFuaW1hdGUoe1wibGVmdFwiOi03OTgqc2VsZi5pbmRleH0sIDUwMCk7XG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcbiAgICBpZihpbmRleCA9PT0gMCl7XG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJjb3VudC0xO1xuICAgIH1lbHNlIGlmIChpbmRleCA9PT0gc2VsZi5iYW5uZXJjb3VudCsxKXtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgIH1lbHNle1xuICAgICAgICBpbmRleCA9IHNlbGYuaW5kZXggLSAxO1xuICAgIH1cblxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oKS5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYmFubmVyVUkgPSAkKFwiI2Jhbm5lci11bFwiKTtcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyY291bnQrMSl7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVJLmNzcyh7J2xlZnQnOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9LCAyMDAwKTtcblxuICAgIC8vIGNsZWFySW50ZXJ2YWwodGltZXIpO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5BcnJvd0NsaWNrID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gMCl7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVJLmNzcyh7J2xlZnQnOi1zZWxmLmJhbm5lcldpZHRoKnNlbGYuYmFubmVyY291bnR9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lcmNvdW50LTE7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSk7XG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyY291bnQrMSApe1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVSS5jc3MoeydsZWZ0Jzotc2VsZi5iYW5uZXJXaWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlblBhZ2VDb250cm9sID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbignbGknKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgb2JqKSB7XG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gaW5kZXgrMTsgIC8vIOS4jua6kOS7o+eggeS4jeS4gOiHtFxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XG5cbiAgICAgICAgfSk7XG4gICAgfSlcbn07XG5cblxuXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblxuICAgIGNvbnNvbGUubG9nKCdydW5uaW5nLi4uJyk7XG4gICAgdGhpcy5pbml0QmFubmVyKCk7XG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcblxuICAgIHRoaXMubG9vcCgpO1xuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcbiAgICB0aGlzLmxpc3RlbkFycm93Q2xpY2soKTtcbiAgICB0aGlzLmxpc3RlblBhZ2VDb250cm9sKCk7XG5cbn07XG5cbmZ1bmN0aW9uIEluZGV4KCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYucGFnZSA9IDI7XG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XG4gICAgc2VsZi5sb2FkQnRuID0gJChcIiNsb2FkLW1vcmVcIik7XG4gICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0YVZhbHVlKSB7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0YVZhbHVlKTtcbiAgICAgICAgdmFyIGRhdGF0cyA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICB2YXIgbm93dHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0YXRzKS8xMDAwO1xuICAgICAgICBpZih0aW1lc3RhbXAgPCA2MCl7XG4gICAgICAgICAgICByZXR1cm4gJ+WImuWImic7XG4gICAgICAgIH1lbHNlIGlmICh0aW1lc3RhbXAgPj02MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCl7XG4gICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwKVxuICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMrJ+WIhumSn+WJjSc7XG4gICAgICAgIH1lbHNlIGlmICh0aW1lc3RhbXAgPj02MCo2MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCoyNCl7XG4gICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MC82MClcbiAgICAgICAgICAgIHJldHVybiBob3Vycysn5bCP5pe25YmNJztcbiAgICAgICAgfWVsc2UgaWYgKHRpbWVzdGFtcCA+PTYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKXtcbiAgICAgICAgICAgIGRheXMgPSBwYXJzZUludCh0aW1lc3RhbXAvNjAvNjAvMjQpXG4gICAgICAgICAgICByZXR1cm4gZGF5cysn5aSp5YmNJztcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgICAgICByZXR1cm4geWVhcisnLycrbW9udGgrJy8nK2RheSsnICcraG91cisnOicrbWludXRlO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG59XG5cbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgbG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlXCIpO1xuICAgIGxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGFnZSA9IHNlbGYucGFnZTtcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2UsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogc2VsZi5jYXRlZ29yeV9pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld3Nlcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlICs9MTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkQnRuLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdGFiR3JvdXAgPSAkKCcubGlzdC10YWInKTtcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gdGhpcyA65Luj6KGo5b2T5YmN6YCJ5Lit55qE6L+Z5LiqbGnmoIfnrb5cbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cignZGF0YS1jYXRlZ29yeScpO1xuICAgICAgICB2YXIgcGFnZSA9IDE7XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogY2F0ZWdvcnlfaWQsXG4gICAgICAgICAgICAgICAgJ3AnOiBwYWdlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIsIHtcIm5ld3Nlc1wiOiBuZXdzZXN9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NMaXN0R3JvdXAgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5JbmRleC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XG5cbn07XG5cbi8vIOS/neivgeWcqGh0bWzliqDovb3lrozmiJDlkI7vvIzlho3miafooYzmi6zlj7flhoXnmoTlh73mlbBcbiQoZnVuY3Rpb24gKCkge1xuICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcbiAgIGJhbm5lci5ydW4oKTtcblxuICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XG4gICBpbmRleC5ydW4oKTtcbn0pOyJdfQ==
